<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App</title>
</head>
<body>
    <h1>Todo List</h1>
    <div id="todos"></div>
    <h2>Add New Todo</h2>
    <form id="todoForm">
        <label for="todoTitle">Title:</label>
        <input type="text" id="todoTitle" name="title" required>
        <button type="submit">Add Todo</button>
    </form>

    <script>
        // Fetch Todos from the server
        fetch('http://localhost:8000/todos')
            .then(response => response.json())
            .then(todos => {
                const todosContainer = document.getElementById('todos');
                
                // Display Todos
                todos.forEach(todo => {
                    const todoDiv = document.createElement('div');
                    todoDiv.textContent = `ID: ${todo.id}, Title: ${todo.title}`;
                    todosContainer.appendChild(todoDiv);
                });
            })
            .catch(error => console.error('Error fetching Todos:', error));
    </script>
</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App</title>
</head>
<body>
    <h1>Todo List</h1>
    <div id="todos"></div>
    <
    <h2>Add New Todo</h2>
    <form id="todoForm">
        <label for="todoTitle">Title:</label>
        <input type="text" id="todoTitle" name="title" required>
        <button type="submit">Add Todo</button>
    </form>

    <script>
        // Function to handle form submission
        function submitForm(event) {
            event.preventDefault();

            // Get the input value
            const title = document.getElementById('todoTitle').value;

            // Make a POST request to add a new Todo
            fetch('http://localhost:8000/todos', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ title }),
            })
            .then(response => response.json())
            .then(newTodo => {
                // Display the newly added Todo
                const todosContainer = document.getElementById('todos');
                const todoDiv = document.createElement('div');
                todoDiv.textContent = `ID: ${newTodo.id}, Title: ${newTodo.title}`;
                todosContainer.appendChild(todoDiv);

                // Clear the input field
                document.getElementById('todoTitle').value = '';
            })
            .catch(error => console.error('Error adding Todo:', error));
        }

        // Attach the submitForm function to the form submission event
        document.getElementById('todoForm').addEventListener('submit', submitForm);

        // Fetch Todos from the server on page load
        fetch('http://localhost:8000/todos')
            .then(response => response.json())
            .then(todos => {
                const todosContainer = document.getElementById('todos');
                
                // Display Todos
                todos.forEach(todo => {
                    const todoDiv = document.createElement('div');
                    todoDiv.textContent = `ID: ${todo.id}, Title: ${todo.title}`;
                    todosContainer.appendChild(todoDiv);
                });
            })
            .catch(error => console.error('Error fetching Todos:', error));
    </script>
</body>
</html>
